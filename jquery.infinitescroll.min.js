(function(n,i,k){i.infinitescroll=function y(C,E,D){this.element=i(D);if(!this._create(C,E)){this.failed=true}};i.infinitescroll.defaults={loading:{finished:k,finishedMsg:"<em>Congratulations, you've reached the end of the internet.</em>",img:"http://www.infinite-scroll.com/loading.gif",msg:null,msgText:"<em>Loading the next set of posts...</em>",selector:null,speed:"fast",start:k},state:{isDuringAjax:false,isInvalidPage:false,isDestroyed:false,isDone:false,isPaused:false,currPage:1},callback:k,debug:false,behavior:k,binder:i(n),nextSelector:"div.navigation a:first",navSelector:"div.navigation",contentSelector:null,extraScrollPx:150,itemSelector:"div.post",animate:false,pathParse:k,dataType:"html",appendCallback:true,bufferPx:40,errorCallback:function(){},infid:0,pixelsFromNavToBottom:k,path:k};i.infinitescroll.prototype={_binding:function g(E){var C=this,D=C.options;D.v="2.0b2.111027";if(!!D.behavior&&this["_binding_"+D.behavior]!==k){this["_binding_"+D.behavior].call(this);return}if(E!=="bind"&&E!=="unbind"){this._debug("Binding value  "+E+" not valid");return false}if(E==="unbind"){(this.options.binder).unbind("smartscroll.infscr."+C.options.infid)}else{(this.options.binder)[E]("smartscroll.infscr."+C.options.infid,function(){C.scroll()})}this._debug("Binding",E)},_create:function s(D,G){var E=i.extend(true,{},i.infinitescroll.defaults,D);if(!this._validate(D)){return false}this.options=E;var F=i(E.nextSelector).attr("href");if(!F){this._debug("Navigation selector not found");return false}E.path=this._determinepath(F);E.contentSelector=E.contentSelector||this.element;E.loading.selector=E.loading.selector||E.contentSelector;E.loading.msg=E.loading.msg||i('<div id="infscr-loading"><img alt="Loading..." src="'+E.loading.img+'" /><div>'+E.loading.msgText+"</div></div>");(new Image()).src=E.loading.img;if(E.pixelsFromNavToBottom===k){E.pixelsFromNavToBottom=i(document).height()-i(E.navSelector).offset().top}var C=this;E.loading.start=E.loading.start||function(){i(E.navSelector).hide();E.loading.msg.appendTo(E.loading.selector).show(E.loading.speed,i.proxy(function(){this.beginAjax(E)},C))};E.loading.finished=E.loading.finished||function(){E.loading.msg.fadeOut("normal")};E.callback=function(H,I){if(!!E.behavior&&H["_callback_"+E.behavior]!==k){H["_callback_"+E.behavior].call(i(E.contentSelector)[0],I)}if(G){G.call(i(E.contentSelector)[0],I,E)}};if(D.debug){if(Function.prototype.bind&&(typeof console==="object"||typeof console==="function")&&typeof console.log==="object"){["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(H){console[H]=this.call(console[H],console)},Function.prototype.bind)}}this._setup();return true},_debug:function p(){if(true!==this.options.debug){return}if(typeof console!=="undefined"&&typeof console.log==="function"){if((Array.prototype.slice.call(arguments)).length===1&&typeof Array.prototype.slice.call(arguments)[0]==="string"){console.log((Array.prototype.slice.call(arguments)).toString())}else{console.log(Array.prototype.slice.call(arguments))}}else{if(!Function.prototype.bind&&typeof console!=="undefined"&&typeof console.log==="object"){Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments))}}},_determinepath:function z(D){var C=this.options;if(!!C.behavior&&this["_determinepath_"+C.behavior]!==k){this["_determinepath_"+C.behavior].call(this,D);return}if(!!C.pathParse){this._debug("pathParse manual");return C.pathParse(D,this.options.state.currPage+1)}else{if(D.match(/^(.*?)\b2\b(.*?$)/)){D=D.match(/^(.*?)\b2\b(.*?$)/).slice(1)}else{if(D.match(/^(.*?)2(.*?$)/)){if(D.match(/^(.*?page=)2(\/.*|$)/)){D=D.match(/^(.*?page=)2(\/.*|$)/).slice(1);return D}D=D.match(/^(.*?)2(.*?$)/).slice(1)}else{if(D.match(/^(.*?page=)1(\/.*|$)/)){D=D.match(/^(.*?page=)1(\/.*|$)/).slice(1);return D}else{this._debug("Sorry, we couldn't parse your Next (Previous Posts) URL. Verify your the css selector points to the correct A tag. If you still get this error: yell, scream, and kindly ask for help at infinite-scroll.com.");C.state.isInvalidPage=true}}}}this._debug("determinePath",D);return D},_error:function u(D){var C=this.options;if(!!C.behavior&&this["_error_"+C.behavior]!==k){this["_error_"+C.behavior].call(this,D);return}if(D!=="destroy"&&D!=="end"){D="unknown"}this._debug("Error",D);if(D==="end"){this._showdonemsg()}C.state.isDone=true;C.state.currPage=1;C.state.isPaused=false;this._binding("unbind")},_loadcallback:function c(G,H){var F=this.options,J=this.options.callback,C=(F.state.isDone)?"done":(!F.appendCallback)?"no-append":"append",I;if(!!F.behavior&&this["_loadcallback_"+F.behavior]!==k){this["_loadcallback_"+F.behavior].call(this,G,H);return}switch(C){case"done":this._showdonemsg();return false;case"no-append":if(F.dataType==="html"){H="<div>"+H+"</div>";H=i(H).find(F.itemSelector)}break;case"append":var E=G.children();if(E.length===0){return this._error("end")}I=document.createDocumentFragment();while(G[0].firstChild){I.appendChild(G[0].firstChild)}this._debug("contentSelector",i(F.contentSelector)[0]);i(F.contentSelector)[0].appendChild(I);H=E.get();break}F.loading.finished.call(i(F.contentSelector)[0],F);if(F.animate){var D=i(n).scrollTop()+i("#infscr-loading").height()+F.extraScrollPx+"px";i("html,body").animate({scrollTop:D},800,function(){F.state.isDuringAjax=false})}if(!F.animate){F.state.isDuringAjax=false}J(this,H)},_nearbottom:function t(){var D=this.options,C=0+i(document).height()-(D.binder.scrollTop())-i(n).height();if(!!D.behavior&&this["_nearbottom_"+D.behavior]!==k){return this["_nearbottom_"+D.behavior].call(this)}this._debug("math:",C,D.pixelsFromNavToBottom);return(C-D.bufferPx<D.pixelsFromNavToBottom)},_pausing:function l(D){var C=this.options;if(!!C.behavior&&this["_pausing_"+C.behavior]!==k){this["_pausing_"+C.behavior].call(this,D);return}if(D!=="pause"&&D!=="resume"&&D!==null){this._debug("Invalid argument. Toggling pause value instead")}D=(D&&(D==="pause"||D==="resume"))?D:"toggle";switch(D){case"pause":C.state.isPaused=true;break;case"resume":C.state.isPaused=false;break;case"toggle":C.state.isPaused=!C.state.isPaused;break}this._debug("Paused",C.state.isPaused);return false},_setup:function q(){var C=this.options;if(!!C.behavior&&this["_setup_"+C.behavior]!==k){this["_setup_"+C.behavior].call(this);return}this._binding("bind");return false},_showdonemsg:function a(){var C=this.options;if(!!C.behavior&&this["_showdonemsg_"+C.behavior]!==k){this["_showdonemsg_"+C.behavior].call(this);return}C.loading.msg.find("img").hide().parent().find("div").html(C.loading.finishedMsg).animate({opacity:1},2000,function(){i(this).parent().fadeOut("normal")});C.errorCallback.call(i(C.contentSelector)[0],"done")},_validate:function v(D){for(var C in D){if(C.indexOf&&C.indexOf("Selector")>-1&&i(D[C]).length===0){this._debug("Your "+C+" found no elements.");return false}}return true},bind:function o(){this._binding("bind")},destroy:function B(){this.options.state.isDestroyed=true;return this._error("destroy")},pause:function e(){this._pausing("pause")},resume:function h(){this._pausing("resume")},beginAjax:function A(F){var D=this,H=F.path,E,C,J,I;F.state.currPage++;D._debug("heading into ajax",H);E=i(F.contentSelector).is("table")?i("<tbody/>"):i("<div/>");C=H.join(F.state.currPage);J=(F.dataType==="html"||F.dataType==="json")?F.dataType:"html+callback";if(F.appendCallback&&F.dataType==="html"){J+="+callback"}switch(J){case"html+callback":D._debug("Using HTML via .load() method");E.load(C+" "+F.itemSelector,null,function G(K){D._loadcallback(E,K)});break;case"html":D._debug("Using "+(J.toUpperCase())+" via $.ajax() method");i.ajax({url:C,dataType:F.dataType,complete:function G(K,L){I=(typeof(K.isResolved)!=="undefined")?(K.isResolved()):(L==="success"||L==="notmodified");if(I){D._loadcallback(E,K.responseText)}else{D._error("end")}}});break;case"json":D._debug("Using "+(J.toUpperCase())+" via $.ajax() method");i.ajax({dataType:"json",type:"GET",url:C,success:function(M,N,L){I=(typeof(L.isResolved)!=="undefined")?(L.isResolved()):(N==="success"||N==="notmodified");if(F.appendCallback){if(F.template!==k){var K=F.template(M);E.append(K);if(I){D._loadcallback(E,K)}else{D._error("end")}}else{D._debug("template must be defined.");D._error("end")}}else{if(I){D._loadcallback(E,M)}else{D._error("end")}}},error:function(){D._debug("JSON ajax request failed.");D._error("end")}});break}},retrieve:function b(E){E=E||null;var C=this,D=C.options;if(!!D.behavior&&this["retrieve_"+D.behavior]!==k){this["retrieve_"+D.behavior].call(this,E);return}if(D.state.isDestroyed){this._debug("Instance is destroyed");return false}D.state.isDuringAjax=true;D.loading.start.call(i(D.contentSelector)[0],D)},scroll:function f(){var C=this.options,D=C.state;if(!!C.behavior&&this["scroll_"+C.behavior]!==k){this["scroll_"+C.behavior].call(this);return}if(D.isDuringAjax||D.isInvalidPage||D.isDone||D.isDestroyed||D.isPaused){return}if(!this._nearbottom()){return}this.retrieve()},toggle:function x(){this._pausing()},unbind:function m(){this._binding("unbind")},update:function j(C){if(i.isPlainObject(C)){this.options=i.extend(true,this.options,C)}}};i.fn.infinitescroll=function d(E,F){var D=typeof E;switch(D){case"string":var C=Array.prototype.slice.call(arguments,1);this.each(function(){var G=i.data(this,"infinitescroll");if(!G){return false}if(!i.isFunction(G[E])||E.charAt(0)==="_"){return false}G[E].apply(G,C)});break;case"object":this.each(function(){var G=i.data(this,"infinitescroll");if(G){G.update(E)}else{G=new i.infinitescroll(E,F,this);if(!G.failed){i.data(this,"infinitescroll",G)}}});break}return this};var w=i.event,r;w.special.smartscroll={setup:function(){i(this).bind("scroll",w.special.smartscroll.handler)},teardown:function(){i(this).unbind("scroll",w.special.smartscroll.handler)},handler:function(F,C){var E=this,D=arguments;F.type="smartscroll";if(r){clearTimeout(r)}r=setTimeout(function(){i.event.handle.apply(E,D)},C==="execAsap"?0:100)}};i.fn.smartscroll=function(C){return C?this.bind("smartscroll",C):this.trigger("smartscroll",["execAsap"])}})(window,jQuery);